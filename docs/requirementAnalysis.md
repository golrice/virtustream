# 软件需求分析报告

## 项目名称：AI虚拟主播系统（virtustream）

---

## 1. 文档修订历史

| 版本号 | 日期       | 修改人 | 描述               |
| ------ | ---------- | ------ | ------------------ |
| 1.0    | 2025-04-27 | ljf    | 初版，确认基本需求 |

---

## 2. 引言

### 2.1 背景
随着虚拟主播（Vtuber）在直播平台的流行，AI驱动的虚拟主播成为新的发展方向。本项目旨在开发一个具备**自然语言聊天**与**简单游戏互动**能力的AI虚拟主播系统，提升直播内容的丰富性和观众粘性。

### 2.2 参考资料
- OpenAI GPT 文档
- Unity3D 官方文档（如果角色动作渲染基于此）
- OBS 虚拟摄像头推流指南

---

## 3. 项目概述

### 3.1 项目目标
开发一个可用于直播的平台AI虚拟主播系统，支持自然聊天、情绪表现（如开心、生气）、并能够与观众进行小游戏互动，初步适配Bilibili与抖音两大直播平台。

### 3.2 主要特性
- AI自然语言对话
- 表情和情绪动画同步
- 简单内置小游戏互动
- 支持实时弹幕交互
- OBS推流兼容输出

### 3.3 主要用户
- 需要低成本本地部署ai主播的人群
- 需要具有可扩展性的ai主播的人群

---

## 4. 需求详细说明

### 4.1 功能需求

#### FR-001 语音聊天系统
- **描述**:  
  AI主播能阅读弹幕，并且通过语音与观众进行实时聊天。
- **触发条件**:  
  收到观众弹幕或聊天信息。
- **处理逻辑**:  
  - 接收消息 → 解析意图 → 生成回复 → 展示或朗读。
- **预期结果**:  
  观众感觉与真实主播无异，交流自然。

#### FR-002 表情管理系统
- **描述**:  
  根据聊天内容情绪，动态切换主播表情（如开心、惊讶、无语）。
- **触发条件**:  
  AI情感分析模块检测到情绪变化。
- **处理逻辑**:  
  - 情感得分触发表情动作切换。
- **预期结果**:  
  角色表情丰富，符合对话氛围。

#### FR-003 简单小游戏系统
- **描述**:  
  观众可以通过指令（如“开始猜数字”）触发小游戏，与主播互动。
- **触发条件**:  
  观众发送启动指令。
- **处理逻辑**:  
  - 支持小游戏如猜数字、拼词游戏。
  - 游戏进程由主播引导提示。
- **预期结果**:  
  观众能顺畅参与，并获得反馈（如胜利、失败）。

#### FR-004 弹幕/聊天室连接
- **描述**:  
  系统实时接入直播平台弹幕，作为聊天与小游戏触发输入。
- **触发条件**:  
  直播连接成功。
- **处理逻辑**:  
  - 与Bilibili/抖音的弹幕API建立WebSocket连接。
- **预期结果**:  
  观众发送的弹幕可实时接收并响应。

#### FR-005 推流输出
- **描述**:  
  AI主播通过虚拟摄像头推流到OBS，供直播软件采集。
- **触发条件**:  
  开启主播模式。
- **处理逻辑**:  
  - 将画面与音频流作为虚拟摄像头源输出。
- **预期结果**:  
  OBS等直播工具可直接采集AI主播画面。

---

### 4.2 非功能需求

- **性能需求**:  
  - 语音回复延迟小于2秒。
  - 单次弹幕高峰期100条/s仍能处理不卡顿(尽量，毕竟可能没有这么高)。

- **安全性需求**:  
  - 过滤不良弹幕内容，防止AI主播误回复敏感信息!!!。

- **可靠性需求**:  
  - 尽可能异常自动重连弹幕服务器。

- **可扩展性需求**:  
  - 后续可扩展更多小游戏，如答题竞赛、虚拟礼物互动。

- **兼容性需求**:  
  - 适配Bilibili直播、抖音弹幕协议。

---

### 4.3 用户界面需求

- 简洁界面用于主播后台管理，包括：
  - 启动/停止直播
  - 调整AI回复模式（正式/搞笑）
  - 查看游戏状态
  - 连接弹幕服务器情况

- 前端界面（观众端）只展示AI主播动作与语言，无额外复杂元素。

---

### 4.4 其他需求

- 聊天记录需本地存档，用于后续分析训练。
- 支持多语言切换（初版支持中文即可）。

---

## 5. 外部接口需求

### 5.1 用户接口
- 主播控制后台，自定义AI操作

### 5.2 硬件接口
- 使用麦克风采集主播语音（用于情绪分析，可选）
- 虚拟摄像头驱动安装（例如OBS虚拟摄像头插件）

### 5.3 软件接口
- 调用OpenAI API（ChatGPT或其他free模型或自建服务器）
- 使用TTS进行语音朗读

### 5.4 通讯接口
- 与Bilibili、抖音弹幕服务器 WebSocket API 连接。

---

## 6. 附录
- openAI 接口文档 (https://platform.openai.com/docs/overview)
- OBS 推流文档 (https://www.obsproject.com.cn/obs/260.html)
- ChatGPT虚拟主播参考 (https://github.com/smallnew666/ChatGPT-Virtual-Live)
- Neuro 参考(https://github.com/kimjammer/Neuro)
- 虚拟主播参考 (https://github.com/jiran214/langup-ai)
